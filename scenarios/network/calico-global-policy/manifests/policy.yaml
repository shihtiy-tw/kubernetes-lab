apiVersion: v1
kind: Namespace
metadata:
  name: scenario-calico-global
---
apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: deny-all-egress
spec:
  order: 1000
  selector: app == 'restricted'
  types:
    - Egress
  egress:
    - action: Deny
      destination: {}
---
apiVersion: v1
kind: Pod
metadata:
  name: restricted-pod
  namespace: scenario-calico-global
  labels:
    app: restricted
spec:
  containers:
    - name: busybox
      image: busybox:1.36
      command: ["sleep", "3600"]
