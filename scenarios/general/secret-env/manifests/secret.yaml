apiVersion: v1
kind: Namespace
metadata:
  name: scenario-secret
---
apiVersion: v1
kind: Secret
metadata:
  name: db-creds
  namespace: scenario-secret
type: Opaque
stringData:
  DB_USER: admin
  DB_PASSWORD: supersecret123
---
apiVersion: v1
kind: Pod
metadata:
  name: app
  namespace: scenario-secret
spec:
  containers:
    - name: app
      image: busybox:1.36
      command: ["sh", "-c", "echo DB_USER=$DB_USER && sleep 3600"]
      envFrom:
        - secretRef:
            name: db-creds
